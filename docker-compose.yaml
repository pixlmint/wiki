services:
    wiki:
        image: wiki
        build:
            dockerfile: local.Dockerfile
            context: .
            args:
                UID: 1000
                GID: 1000
        container_name: wiki
        ports:
            - '94:80'
        volumes:
            - ./:/var/www/html
        environment:
            INI_ZEND_EXTENSION: xdebug.so
            OPCACHE_MAX_WASTED_PERCENTAGE: 20
            OPCACHE_JIT: 1255
            OPCACHE_ENABLE: 1
            OPCACHE_JIT_BUFFER_SIZE: 100M
            OPCACHE_VALIDATE_TIMESTAMPS: 1
            OPCACHE_INTERNED_STRINGS_BUFFER: 16
            XDEBUG_MODE: debug
            XDEBUG_CLIENT_HOST: 192.168.1.169
            XDEBUG_CLIENT_PORT: 9000
            XDEBUG_START_WITH_REQUEST: yes
            XDEBUG_DISCOVER_CLIENT_HOST: true
    jupyter:
      image: pixlmint/jupyter
      container_name: jupyter
      build:
        context: .
        dockerfile: docker/jupyter/Dockerfile
        args:
          UID: 1000
          GID: 1000
      ports:
        - "8888:8888"
      volumes:
        - ./content:/home/pixlmint/notebooks/wiki
        - ./docker/jupyter:/home/pixlmint/config
      environment:
        - JUPYTER_TOKEN=asdf
    jupyter_remote:
      container_name: jupyter_remote
      image: pixlmint/jupyter
      ports:
        - "8889:8889"
      volumes:
        - ./docker/jupyter:/home/pixlmint/config
      environment:
        - JUPYTER_TOKEN=asdf
        - JUPYTER_PORT=8889

